cmake_minimum_required(VERSION 3.5)

PROJECT(bf_compiler
    VERSION 1.0.0
    LANGUAGES CXX
)

# Global CMake variables
set(CMAKE_CXX_STANDARD 20)

# TODO: put more config options here

set(asm_cpp_embedder_GENERATED_FILES_DIR
    ${CMAKE_BINARY_DIR}/generated
)
file(MAKE_DIRECTORY ${asm_cpp_embedder_GENERATED_FILES_DIR})

# files that will be generated by the asm_cpp_embedder (depends on asm object files)
set(ASM_CPP_FILES
    ${asm_cpp_embedder_GENERATED_FILES_DIR}/constants.cpp
    ${asm_cpp_embedder_GENERATED_FILES_DIR}/data.cpp
    ${asm_cpp_embedder_GENERATED_FILES_DIR}/decreaseIndex.cpp
    ${asm_cpp_embedder_GENERATED_FILES_DIR}/increaseIndex.cpp
    ${asm_cpp_embedder_GENERATED_FILES_DIR}/print.cpp
    ${asm_cpp_embedder_GENERATED_FILES_DIR}/printData.cpp
    ${asm_cpp_embedder_GENERATED_FILES_DIR}/readData.cpp
)
# generating empty files to avoid cmake errors
foreach(asm_source ${ASM_CPP_FILES})
    file(TOUCH ${asm_source})
endforeach()

# files that will be generated by the bf_compiler (do not depend on anything)
set(ASM_MACROS_SOURCE_FILES
    ${asm_cpp_embedder_GENERATED_FILES_DIR}/macros.cpp
)
# generating empty files to avoid cmake errors
foreach(asm_macros_source ${ASM_MACROS_SOURCE_FILES})
    file(TOUCH ${asm_macros_source})
endforeach()


add_subdirectory(src/asm)
add_subdirectory(src/asm_cpp_embedder)
add_subdirectory(src/bf_compiler)
