cmake_minimum_required(VERSION 3.5)

PROJECT(bf_compiler
    VERSION 1.0.0
    LANGUAGES CXX
)

# Global CMake variables
set(CMAKE_CXX_STANDARD 20)

# TODO: put more config options here

set(bf_compiler_GENERATED_FILES_DIR
    ${CMAKE_BINARY_DIR}/generated
)
file(MAKE_DIRECTORY ${bf_compiler_GENERATED_FILES_DIR})

# files that will be generated by the pre_processing step
set(ASM_SOURCE_FILES
    ${bf_compiler_GENERATED_FILES_DIR}/constants.cpp
    ${bf_compiler_GENERATED_FILES_DIR}/data.cpp
    ${bf_compiler_GENERATED_FILES_DIR}/decreaseIndex.cpp
    ${bf_compiler_GENERATED_FILES_DIR}/increaseIndex.cpp
    ${bf_compiler_GENERATED_FILES_DIR}/print.cpp
    ${bf_compiler_GENERATED_FILES_DIR}/printData.cpp
    ${bf_compiler_GENERATED_FILES_DIR}/readData.cpp
)
set(ASM_HEADER_FILES_MACROS
    ${bf_compiler_GENERATED_FILES_DIR}/macros.hpp
)
# generating empty files to be referenced by the compiler
foreach(asm_source ${ASM_SOURCE_FILES})
    file(TOUCH ${asm_source})
endforeach()
foreach(asm_header_macros ${ASM_HEADER_FILES_MACROS})
    file(TOUCH ${asm_header_macros})
endforeach()


add_subdirectory(src/asm)
add_subdirectory(src/cpp/pre_processing)
add_subdirectory(src/cpp/bf_compiler)
